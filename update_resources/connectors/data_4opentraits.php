<?php
namespace php_active_record;
/* DATA-1909: resource metadata and summary-from-resource-data export from CKAN
*/
include_once(dirname(__FILE__) . "/../../config/environment.php");
require_library('connectors/Data_OpenTraits');
$timestart = time_elapsed();

/*
$url = "https://opendata.eol.org/dataset/86081133-3db1-4ffc-8b1f-2bbba1d1f948/resource/b9951366-90e8-475e-927e-774b95faf7ed/download/hardtomatch.tar.gz";
$url = "http://rs.tdwg.org/dwc/terms/taxon";
print_r(pathinfo($url));
echo "\n";
echo pathinfo($url, PATHINFO_BASENAME);
exit("\n-end test-\n");
*/

$func = new Data_OpenTraits();
$func->start();

/* test during dev:
$hc[2] = "Life|Cellular Organisms|Eukaryota|Opisthokonta|Metazoa|Bilateria|Protostomia|Spiralia|Gnathifera|Syndermata";
$hc[38] = "Life|Cellular Organisms|Eukaryota|Opisthokonta|Metazoa|Bilateria|Protostomia|Spiralia|Annelida|Pleistoannelida|Sedentaria|Clitellata|Hirudinea|Acanthobdellidea";
$hc[46] = "Life|Cellular Organisms|Eukaryota|Opisthokonta|Metazoa|Bilateria|Protostomia|Spiralia|Annelida|Pleistoannelida|Sedentaria|Clitellata";
$func->process_pipe_delim_values($hc);
*/

/*
// $ids = array(46447570, 46447609, 46447611, 46447618, 46448168, 46448598, 46448684, 46450580, 46450691, 46450862, 46451183, 46451269, 46451274, 46451775, 46451779, 46459698, 46465037, 
// 46465655, 46466613, 46466840, 46467106, 46467110, 46469524, 46469676, 46470422, 46470499, 46471962, 46471973, 46473364, 46474253, 46474372, 46474962, 46478638, 46478708, 
// 46480539, 46481336, 46481866, 46481871, 46481877, 46495214, 46495338, 46495340, 46495445, 46495447, 46495453, 46495459, 46495460, 46495542, 46495592, 46495605, 46495607, 
// 46495617, 46495730, 46496068, 46496150, 46496176, 46496219, 46496227, 46496363, 46496650, 46496743, 46496761, 46497156, 46497521, 46498016, 46498171, 46498173, 46498182);

// 3rd
$ids = array(13073315, 13075287, 18727097, 18727104, 18728095, 24274346, 32067571, 32133334, 35186743, 39301636, 45250232, 45315450, 45315513, 45316770, 
45318221, 45319260, 45319865, 45319905, 45319907, 45319909, 45319911, 45319914, 45319915, 45321676, 45321697, 45321724, 45321729, 45392719, 
45409642, 45500159, 46447447, 46447636, 46447721, 46447830, 46447836, 46447931, 46447945, 46448494, 46448515, 46448598, 46448684, 46448700);

// 2nd
// $ids = array(46448984, 46449075, 46449083, 46451614, 46451631, 46451668, 46451770, 46451788, 46451824, 46465038, 46465656, 46465773, 46466332, 46466612, 
// 46467105, 46467239, 46467304, 46467427, 46467676, 46468378, 46468508, 46468909, 46469212, 46469236, 46469250, 46470419, 46470496, 46470663, 
// 46470926, 46470954, 46470996, 46471773, 46471855, 46472161, 46472353, 46472372, 46473260, 46473289, 46473458, 46473848, 46475014, 46476084);

// 1st
// $ids = array(46476166, 46476236, 46476707, 46479639, 46479641, 46501816, 46544725, 46545575, 46549353, 46549629, 46549642, 46549777, 46550019, 46554113, 
// 46557930, 46582349, 46582429, 46582712, 46582790, 46582951, 46583041, 46584106, 46584113, 46584114, 46584175, 46584359, 46584413, 46584647, 
// 46584698, 46584753, 46584757, 46584785, 46584803, 46584807, 46584821, 46584838, 46584855, 46585142, 46589038, 46591286, 46986216, 47170288, 
// 47180531, 47184187, 49680257, 51270209, 51270724, 51270846, 51271038, 51274310, 51886950, 52584271, 52586969, 52588119);

foreach($ids as $eol_id) $func->lookup_DH($eol_id);
*/

$elapsed_time_sec = time_elapsed() - $timestart;
echo "\n\n";
echo "elapsed time = " . $elapsed_time_sec/60 . " minutes \n";
echo "elapsed time = " . $elapsed_time_sec/60/60 . " hours \n";
echo "\nDone processing.\n";
?>